<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Builder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2rem;
            color: #7f8c8d;
            max-width: 800px;
            margin: 0 auto;
        }

        .main-content {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .form-section, .preview-section {
            flex: 1;
            min-width: 350px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .form-section h2, .preview-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .required::after {
            content: " *";
            color: #e74c3c;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 5px;
        }

        textarea {
            height: 100px;
            resize: vertical;
        }

        .error-message {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .template-options {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .template-item {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 120px;
        }

        .template-item:hover, .template-item.active {
            border-color: #3498db;
            transform: translateY(-5px);
        }

        .template-preview {
            width: 100%;
            height: 150px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .template-1 .template-preview {
            background: linear-gradient(135deg, #3498db, #2c3e50);
        }

        .template-2 .template-preview {
            background: linear-gradient(135deg, #e74c3c, #34495e);
        }

        .template-3 .template-preview {
            background: linear-gradient(135deg, #9b59b6, #2c3e50);
        }

        .template-4 .template-preview {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .template-5 .template-preview {
            background: linear-gradient(135deg, #2c3e50, #34495e);
        }

        .template-name {
            margin-top: 10px;
            font-weight: 600;
        }

        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .download-btn {
            background: #27ae60;
        }

        .download-btn:hover {
            background: #219653;
        }

        .ai-enhance-btn {
            background: #9b59b6;
        }

        .ai-enhance-btn:hover {
            background: #8e44ad;
        }

        .check-ats-btn {
            background: #f39c12;
        }

        .check-ats-btn:hover {
            background: #e67e22;
        }

        .resume-preview {
            background: white;
            border: 1px solid #ddd;
            min-height: 500px;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            position: relative;
        }

        /* Template 1 */
        .template-1 .resume-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .template-1 .resume-header h3 {
            font-size: 28px;
            color: #2c3e50;
        }

        .template-1 .contact-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .template-1 .section {
            margin-bottom: 20px;
        }

        .template-1 .section-title {
            background: #2c3e50;
            color: white;
            padding: 8px 15px;
            margin-bottom: 10px;
            border-radius: 3px;
        }

        /* Template 2 */
        .template-2 .resume-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .template-2 .profile-img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #3498db;
            margin-right: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 40px;
        }

        .template-2 .section {
            margin-bottom: 20px;
        }

        .template-2 .section-title {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }

        /* Template 3 */
        .template-3 .resume-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            margin: -30px -30px 20px -30px;
            border-radius: 8px 8px 0 0;
        }

        .template-3 .contact-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .template-3 .section {
            margin-bottom: 20px;
            padding-left: 20px;
            border-left: 3px solid #3498db;
        }

        /* Template 4 - Creative Style */
        .template-4 .resume-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            margin: -30px -30px 25px -30px;
            border-radius: 10px 10px 0 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .template-4 .resume-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="rgba(255,255,255,0.1)"><circle cx="20" cy="20" r="5"/><circle cx="80" cy="30" r="7"/><circle cx="40" cy="80" r="6"/></svg>');
        }

        .template-4 .resume-header h3 {
            font-size: 32px;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .template-4 .resume-header .title {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .template-4 .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
            position: relative;
            z-index: 1;
        }

        .template-4 .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        .template-4 .contact-item i {
            width: 20px;
            text-align: center;
        }

        .template-4 .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .template-4 .left-column {
            border-right: 2px dashed #e0e0e0;
            padding-right: 25px;
        }

        .template-4 .right-column {
            padding-left: 25px;
        }

        .template-4 .section {
            margin-bottom: 25px;
            position: relative;
        }

        .template-4 .section-title {
            color: #764ba2;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #764ba2;
            position: relative;
        }

        .template-4 .section-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 2px;
            background: #667eea;
        }

        .template-4 .education-entry,
        .template-4 .project-entry {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            transition: transform 0.3s ease;
        }

        .template-4 .education-entry:hover,
        .template-4 .project-entry:hover {
            transform: translateX(5px);
        }

        .template-4 .education-header,
        .template-4 .project-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .template-4 .skill-item {
            margin-bottom: 10px;
        }

        .template-4 .skill-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        .template-4 .skill-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .template-4 .skill-level {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 3px;
        }

        .template-4 .language-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
        }

        /* Template 5 - Minimalist Style */
        .template-5 .resume-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .template-5 .resume-header h3 {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 5px;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .template-5 .resume-header .title {
            font-size: 16px;
            color: #7f8c8d;
            font-weight: 400;
            margin-bottom: 15px;
        }

        .template-5 .contact-info {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
        }

        .template-5 .contact-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #555;
            font-size: 14px;
        }

        .template-5 .section {
            margin-bottom: 25px;
        }

        .template-5 .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            padding-left: 15px;
        }

        .template-5 .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background: #2c3e50;
            border-radius: 50%;
        }

        .template-5 .section-content {
            padding-left: 15px;
        }

        .template-5 .education-entry,
        .template-5 .project-entry {
            margin-bottom: 20px;
            position: relative;
        }

        .template-5 .education-entry::before,
        .template-5 .project-entry::before {
            content: '';
            position: absolute;
            left: -15px;
            top: 8px;
            width: 6px;
            height: 6px;
            background: #bdc3c7;
            border-radius: 50%;
        }

        .template-5 .education-header,
        .template-5 .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 5px;
        }

        .template-5 .education-degree,
        .template-5 .project-name {
            font-weight: 600;
            color: #2c3e50;
            flex: 1;
        }

        .template-5 .education-date,
        .template-5 .project-date {
            color: #7f8c8d;
            font-size: 14px;
            min-width: 120px;
            text-align: right;
        }

        .template-5 .education-college,
        .template-5 .project-tech {
            color: #3498db;
            font-style: italic;
            margin-bottom: 5px;
        }

        .template-5 .education-grade,
        .template-5 .project-description {
            color: #555;
            line-height: 1.5;
            font-size: 14px;
        }

        .template-5 .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .template-5 .skill-category {
            margin-bottom: 15px;
        }

        .template-5 .skill-category h4 {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .template-5 .skill-list {
            list-style: none;
            padding: 0;
        }

        .template-5 .skill-list li {
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
            font-size: 14px;
        }

        .template-5 .skill-list li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #3498db;
        }

        .template-5 .language-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .template-5 .language-item {
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            border: 1px solid #e9ecef;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            display: none;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            display: none;
        }

        .error-notification {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            display: none;
        }

        .ai-suggestions {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            display: none;
        }

        .suggestion-item {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }

        .suggestion-item::before {
            content: "💡";
            position: absolute;
            left: 0;
        }

        .education-entry, .project-entry {
            border: 1px solid #eee;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .education-header, .project-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .education-degree, .project-name {
            font-weight: bold;
            color: #2c3e50;
        }

        .education-date, .project-date {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .education-college, .project-tech {
            font-style: italic;
            color: #3498db;
            margin-bottom: 5px;
        }

        .education-grade, .project-description {
            color: #555;
        }

        .add-btn {
            background: #27ae60;
            padding: 8px 15px;
            font-size: 14px;
            margin-top: 5px;
        }

        .add-btn:hover {
            background: #219653;
        }

        .remove-btn {
            background: #e74c3c;
            padding: 5px 10px;
            font-size: 12px;
            margin-top: 10px;
        }

        .remove-btn:hover {
            background: #c0392b;
        }

        /* ATS Score Section Styles */
        .ats-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
            display: none;
        }

        .ats-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        .ats-score-display {
            text-align: center;
            margin-bottom: 30px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            position: relative;
            background: conic-gradient(#27ae60 0% 0%, #ecf0f1 0% 100%);
            transition: background 1s ease;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .score-circle span {
            z-index: 1;
        }

        .score-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .score-description {
            color: #7f8c8d;
            max-width: 500px;
            margin: 0 auto;
        }

        .ats-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .ats-category {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .ats-category h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .category-score {
            background: #3498db;
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .ats-category ul {
            list-style-type: none;
            padding-left: 0;
        }

        .ats-category li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }

        .ats-category li.pass::before {
            content: "✓";
            color: #27ae60;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .ats-category li.fail::before {
            content: "✗";
            color: #e74c3c;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .ats-category li.warning::before {
            content: "!";
            color: #f39c12;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .ats-improvements {
            background: #e8f4fc;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .ats-improvements h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .improvement-item {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #3498db;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .template-options {
                justify-content: center;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .education-header, .project-header {
                flex-direction: column;
            }

            .template-4 .main-content {
                grid-template-columns: 1fr;
            }
            
            .template-4 .left-column {
                border-right: none;
                padding-right: 0;
                border-bottom: 2px dashed #e0e0e0;
                padding-bottom: 25px;
            }
            
            .template-4 .right-column {
                padding-left: 0;
                padding-top: 25px;
            }
            
            .ats-breakdown {
                grid-template-columns: 1fr;
            }
            
            .score-circle {
                width: 120px;
                height: 120px;
            }
            
            .score-circle::before {
                width: 100px;
                height: 100px;
            }
        }

        /* Print styles for PDF generation */
        @media print {
            body {
                margin: 0;
                padding: 0;
                background: white !important;
            }
            
            body * {
                visibility: hidden;
            }
            
            .resume-preview, .resume-preview * {
                visibility: visible;
            }
            
            .resume-preview {
                position: absolute !important;
                left: 0 !important;
                top: 0 !important;
                width: 100% !important;
                height: auto !important;
                margin: 0 !important;
                padding: 15mm !important;
                box-shadow: none !important;
                border: none !important;
                background: white !important;
                font-size: 12px !important;
                line-height: 1.4 !important;
            }
            
            /* Fix template 3 header for print */
            .template-3 .resume-header {
                margin: 0 0 15px 0 !important;
                border-radius: 0 !important;
                padding: 15px !important;
            }

            /* Fix template 4 header for print */
            .template-4 .resume-header {
                margin: 0 0 15px 0 !important;
                border-radius: 0 !important;
                padding: 15px !important;
            }
            
            /* Ensure content fits on pages */
            .section {
                page-break-inside: avoid;
                break-inside: avoid-page;
                margin-bottom: 15px !important;
            }
            
            .education-entry, .project-entry {
                page-break-inside: avoid;
                break-inside: avoid-page;
                margin-bottom: 10px !important;
                padding: 10px !important;
            }
            
            /* Hide interactive elements */
            button, .action-buttons, .remove-btn, .add-btn {
                display: none !important;
            }
        }

        /* PDF optimized styles */
        .pdf-optimized {
            width: 210mm !important;
            min-height: 297mm !important;
            padding: 20mm !important;
            margin: 0 auto !important;
            background: white !important;
            box-shadow: none !important;
            border: none !important;
            font-size: 12px !important;
            line-height: 1.4 !important;
        }

        .pdf-optimized .resume-header h3 {
            font-size: 22px !important;
            margin-bottom: 10px !important;
        }

        .pdf-optimized .section-title {
            font-size: 14px !important;
            font-weight: bold !important;
            margin-bottom: 8px !important;
            padding: 5px 10px !important;
        }

        .pdf-optimized .contact-info {
            font-size: 11px !important;
            margin-bottom: 15px !important;
            flex-wrap: wrap !important;
            gap: 10px !important;
        }

        .pdf-optimized .education-entry,
        .pdf-optimized .project-entry {
            margin-bottom: 12px !important;
            padding: 8px !important;
            border: 1px solid #eee !important;
            background: #f9f9f9 !important;
        }

        .pdf-optimized .education-degree,
        .pdf-optimized .project-name {
            font-size: 13px !important;
            font-weight: bold !important;
        }

        .pdf-optimized .education-date,
        .pdf-optimized .project-date {
            font-size: 11px !important;
        }

        /* Ensure content doesn't overflow */
        .pdf-optimized * {
            max-width: 100% !important;
            word-wrap: break-word !important;
        }

        /* Mobile responsiveness for PDF */
        @media (max-width: 768px) {
            .pdf-optimized {
                padding: 15mm !important;
            }
            
            .pdf-optimized .contact-info {
                flex-direction: column !important;
                gap: 5px !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>AI Resume Builder</h1>
            <p>Create a professional resume in minutes with our AI-powered resume builder. Select a template, fill in your details, and download as PDF.</p>
        </header>

        <div class="main-content">
            <div class="form-section">
                <h2>Your Information</h2>
                
                <div class="form-group">
                    <label for="fullName" class="required">Full Name</label>
                    <input type="text" id="fullName" placeholder="John Doe">
                    <div class="error-message" id="nameError">Please enter your full name</div>
                </div>
                
                <div class="form-group">
                    <label for="email" class="required">Email</label>
                    <input type="email" id="email" placeholder="john.doe@example.com">
                    <div class="error-message" id="emailError">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" placeholder="+1 (555) 123-4567">
                </div>
                
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender">
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                        <option value="Prefer not to say">Prefer not to say</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" placeholder="New York, NY">
                </div>
                
                <div class="form-group">
                    <label for="linkedin">LinkedIn (optional)</label>
                    <input type="url" id="linkedin" placeholder="https://linkedin.com/in/johndoe">
                </div>

                <div class="form-group">
                    <label for="summary">Professional Summary</label>
                    <textarea id="summary" placeholder="Experienced software developer with 5+ years..."></textarea>
                </div>
                
                <h3>Education</h3>
                <div id="education-container">
                    <div class="education-entry">
                        <div class="education-header">
                            <div>
                                <select class="education-level">
                                    <option value="">Select Degree Level</option>
                                    <option value="High School">High School</option>
                                    <option value="Associate">Associate</option>
                                    <option value="Bachelor's">Bachelor's</option>
                                    <option value="Master's">Master's</option>
                                    <option value="Doctorate">Doctorate</option>
                                </select>
                            </div>
                            <div>
                                <input type="text" class="education-year" placeholder="Passout Year">
                            </div>
                        </div>
                        <input type="text" class="education-degree" placeholder="Degree Name (e.g., B.Tech in Computer Science)">
                        <input type="text" class="education-college" placeholder="College/University Name">
                        <input type="text" class="education-grade" placeholder="Percentage/CGPA (e.g., 85% or 8.5/10)">
                    </div>
                </div>
                <button class="add-btn" id="add-education"><i class="fas fa-plus"></i> Add Education</button>
                
                <div class="form-group">
                    <label for="experience">Work Experience</label>
                    <textarea id="experience" placeholder="Software Engineer at Tech Corp (2020-Present): Developed web applications using React and Node.js..."></textarea>
                </div>

                <h3>Projects</h3>
                <div id="projects-container">
                    <div class="project-entry">
                        <div class="project-header">
                            <input type="text" class="project-name" placeholder="Project Name">
                            <input type="text" class="project-date" placeholder="Project Duration">
                        </div>
                        <input type="text" class="project-tech" placeholder="Technologies Used">
                        <textarea class="project-description" placeholder="Project Description"></textarea>
                    </div>
                </div>
                <button class="add-btn" id="add-project"><i class="fas fa-plus"></i> Add Project</button>

                <div class="form-group">
                    <label for="certifications">Certifications</label>
                    <textarea id="certifications" placeholder="AWS Certified Developer, Google Cloud Professional..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="skills">Skills</label>
                    <textarea id="skills" placeholder="JavaScript, React, Node.js, Python, SQL"></textarea>
                </div>

                <div class="form-group">
                    <label for="languages">Languages</label>
                    <input type="text" id="languages" placeholder="English (Native), Spanish (Intermediate)">
                </div>
                
                <h2>Choose a Template</h2>
                
                <div class="template-options">
                    <div class="template-item active" data-template="template-1">
                        <div class="template-preview">Professional</div>
                        <div class="template-name">Professional</div>
                    </div>
                    <div class="template-item" data-template="template-2">
                        <div class="template-preview">Modern</div>
                        <div class="template-name">Modern</div>
                    </div>
                    <div class="template-item" data-template="template-3">
                        <div class="template-preview">Elegant</div>
                        <div class="template-name">Elegant</div>
                    </div>
                    <div class="template-item" data-template="template-4">
                        <div class="template-preview">Creative</div>
                        <div class="template-name">Creative</div>
                    </div>
                    <div class="template-item" data-template="template-5">
                        <div class="template-preview">Minimalist</div>
                        <div class="template-name">Minimalist</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="generateBtn">
                        <i class="fas fa-magic"></i> Generate Resume
                    </button>
                    <button id="aiEnhanceBtn" class="ai-enhance-btn" disabled>
                        <i class="fas fa-robot"></i> AI Enhance
                    </button>
                    <button id="checkAtsBtn" class="check-ats-btn" disabled>
                        <i class="fas fa-search"></i> Check ATS Score
                    </button>
                </div>
                
                <div id="loading" class="loading">
                    <p><i class="fas fa-spinner fa-spin"></i> Generating your resume...</p>
                </div>
                
                <div id="successMessage" class="success-message">
                    <i class="fas fa-check-circle"></i> Your resume has been generated successfully! Go to the preview section to download it as PDF.
                </div>

                <div id="errorNotification" class="error-notification">
                    <i class="fas fa-exclamation-triangle"></i> <span id="errorText">There was an error processing your request.</span>
                </div>

                <div id="aiSuggestions" class="ai-suggestions">
                    <h3><i class="fas fa-lightbulb"></i> AI Suggestions</h3>
                    <div id="suggestionsList"></div>
                </div>
            </div>
            
            <div class="preview-section">
                <h2>Resume Preview</h2>
                
                <div class="resume-preview template-1" id="resumePreview">
                    <div class="resume-header">
                        <h3 id="previewName">John Doe</h3>
                    </div>
                    
                    <div class="contact-info">
                        <div id="previewEmail">john.doe@example.com</div>
                        <div id="previewPhone">+1 (555) 123-4567</div>
                        <div id="previewGender"></div>
                        <div id="previewAddress">New York, NY</div>
                        <div id="previewLinkedIn">linkedin.com/in/johndoe</div>
                    </div>

                    <div class="section">
                        <div class="section-title">PROFESSIONAL SUMMARY</div>
                        <div id="previewSummary">Experienced software developer with 5+ years...</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">EDUCATION</div>
                        <div id="previewEducation"></div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">EXPERIENCE</div>
                        <div id="previewExperience">Software Engineer at Tech Corp (2020-Present): Developed web applications using React and Node.js...</div>
                    </div>

                    <div class="section">
                        <div class="section-title">PROJECTS</div>
                        <div id="previewProjects"></div>
                    </div>

                    <div class="section">
                        <div class="section-title">CERTIFICATIONS</div>
                        <div id="previewCertifications">AWS Certified Developer, Google Cloud Professional...</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">SKILLS</div>
                        <div id="previewSkills">JavaScript, React, Node.js, Python, SQL</div>
                    </div>

                    <div class="section">
                        <div class="section-title">LANGUAGES</div>
                        <div id="previewLanguages">English (Native), Spanish (Intermediate)</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="downloadBtn" class="download-btn" disabled>
                        <i class="fas fa-download"></i> Download as PDF
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ATS Score Section -->
        <div class="ats-section" id="atsSection">
            <h2>ATS Score Analysis</h2>
            
            <div class="ats-score-display">
                <div class="score-circle" id="scoreCircle">
                    <span id="scoreValue">0%</span>
                </div>
                <div class="score-text" id="scoreText">Poor ATS Compatibility</div>
                <div class="score-description" id="scoreDescription">
                    Your resume needs significant improvements to pass through most Applicant Tracking Systems.
                </div>
            </div>
            
            <div class="ats-breakdown" id="atsBreakdown">
                <!-- ATS categories will be populated by JavaScript -->
            </div>
            
            <div class="ats-improvements">
                <h3>Recommended Improvements</h3>
                <div id="improvementsList">
                    <!-- Improvement suggestions will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const generateBtn = document.getElementById('generateBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const aiEnhanceBtn = document.getElementById('aiEnhanceBtn');
            const checkAtsBtn = document.getElementById('checkAtsBtn');
            const loading = document.getElementById('loading');
            const successMessage = document.getElementById('successMessage');
            const errorNotification = document.getElementById('errorNotification');
            const errorText = document.getElementById('errorText');
            const aiSuggestions = document.getElementById('aiSuggestions');
            const suggestionsList = document.getElementById('suggestionsList');
            const resumePreview = document.getElementById('resumePreview');
            const templateItems = document.querySelectorAll('.template-item');
            const addEducationBtn = document.getElementById('add-education');
            const addProjectBtn = document.getElementById('add-project');
            const educationContainer = document.getElementById('education-container');
            const projectsContainer = document.getElementById('projects-container');
            
            // ATS Elements
            const atsSection = document.getElementById('atsSection');
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreValue = document.getElementById('scoreValue');
            const scoreText = document.getElementById('scoreText');
            const scoreDescription = document.getElementById('scoreDescription');
            const atsBreakdown = document.getElementById('atsBreakdown');
            const improvementsList = document.getElementById('improvementsList');
            
            // Preview Elements
            const previewElements = {
                name: document.getElementById('previewName'),
                email: document.getElementById('previewEmail'),
                phone: document.getElementById('previewPhone'),
                gender: document.getElementById('previewGender'),
                address: document.getElementById('previewAddress'),
                linkedin: document.getElementById('previewLinkedIn'),
                summary: document.getElementById('previewSummary'),
                education: document.getElementById('previewEducation'),
                experience: document.getElementById('previewExperience'),
                projects: document.getElementById('previewProjects'),
                certifications: document.getElementById('previewCertifications'),
                skills: document.getElementById('previewSkills'),
                languages: document.getElementById('previewLanguages')
            };
            
            // Input Elements
            const inputElements = {
                fullName: document.getElementById('fullName'),
                email: document.getElementById('email'),
                phone: document.getElementById('phone'),
                gender: document.getElementById('gender'),
                address: document.getElementById('address'),
                linkedin: document.getElementById('linkedin'),
                summary: document.getElementById('summary'),
                experience: document.getElementById('experience'),
                certifications: document.getElementById('certifications'),
                skills: document.getElementById('skills'),
                languages: document.getElementById('languages')
            };
            
            // Error Elements
            const errorElements = {
                nameError: document.getElementById('nameError'),
                emailError: document.getElementById('emailError')
            };
            
            let selectedTemplate = 'template-1';
            let isResumeGenerated = false;
            
            // Template selection
            templateItems.forEach(item => {
                item.addEventListener('click', function() {
                    templateItems.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    selectedTemplate = this.getAttribute('data-template');
                    
                    // Update preview with selected template
                    if (resumePreview) {
                        resumePreview.className = 'resume-preview ' + selectedTemplate;
                        
                        // Special handling for template 4 structure
                        if (selectedTemplate === 'template-4') {
                            updateTemplate4Structure();
                        } else if (selectedTemplate === 'template-5') {
                            updateTemplate5Structure();
                        } else {
                            // Reset to default structure for other templates
                            resetPreviewStructure();
                        }
                    }
                });
            });
            
            // Function to update template 4 specific structure
            function updateTemplate4Structure() {
                const template4HTML = `
                    <div class="resume-header">
                        <h3 id="previewName">John Doe</h3>
                        <div class="title" id="previewTitle">Professional Title</div>
                        <div class="contact-info">
                            <div class="contact-item">
                                <i class="fas fa-envelope"></i>
                                <div id="previewEmail">john.doe@example.com</div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-phone"></i>
                                <div id="previewPhone">+1 (555) 123-4567</div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div id="previewAddress">New York, NY</div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-link"></i>
                                <div id="previewLinkedIn">linkedin.com/in/johndoe</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="main-content">
                        <div class="left-column">
                            <div class="section">
                                <div class="section-title">PROFILE</div>
                                <div id="previewSummary">Experienced software developer with 5+ years...</div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title">EDUCATION</div>
                                <div id="previewEducation"></div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title">SKILLS</div>
                                <div id="previewSkills">JavaScript, React, Node.js, Python, SQL</div>
                            </div>

                            <div class="section">
                                <div class="section-title">LANGUAGES</div>
                                <div id="previewLanguages">English (Native), Spanish (Intermediate)</div>
                            </div>
                        </div>
                        
                        <div class="right-column">
                            <div class="section">
                                <div class="section-title">EXPERIENCE</div>
                                <div id="previewExperience">Software Engineer at Tech Corp (2020-Present)...</div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title">PROJECTS</div>
                                <div id="previewProjects"></div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title">CERTIFICATIONS</div>
                                <div id="previewCertifications">AWS Certified Developer, Google Cloud Professional...</div>
                            </div>
                        </div>
                    </div>
                `;
                
                resumePreview.innerHTML = template4HTML;
                updatePreviewElements();
            }
            
            // Function to update template 5 specific structure
            function updateTemplate5Structure() {
                const template5HTML = `
                    <div class="resume-header">
                        <h3 id="previewName">John Doe</h3>
                        <div class="title" id="previewTitle">Software Developer</div>
                        <div class="contact-info">
                            <div class="contact-item">
                                <i class="fas fa-envelope"></i>
                                <div id="previewEmail">john.doe@example.com</div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-phone"></i>
                                <div id="previewPhone">+1 (555) 123-4567</div>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div id="previewAddress">New York, NY</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">PROFESSIONAL SUMMARY</div>
                        <div class="section-content">
                            <div id="previewSummary">Experienced software developer with 5+ years...</div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">EDUCATION</div>
                        <div class="section-content">
                            <div id="previewEducation"></div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">EXPERIENCE</div>
                        <div class="section-content">
                            <div id="previewExperience">Software Engineer at Tech Corp (2020-Present)...</div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">PROJECTS</div>
                        <div class="section-content">
                            <div id="previewProjects"></div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">SKILLS</div>
                        <div class="section-content">
                            <div id="previewSkills">JavaScript, React, Node.js, Python, SQL</div>
                        </div>
                    </div>
                `;
                
                resumePreview.innerHTML = template5HTML;
                updatePreviewElements();
            }
            
            // Function to reset to default structure
            function resetPreviewStructure() {
                const defaultHTML = `
                    <div class="resume-header">
                        <h3 id="previewName">John Doe</h3>
                    </div>
                    
                    <div class="contact-info">
                        <div id="previewEmail">john.doe@example.com</div>
                        <div id="previewPhone">+1 (555) 123-4567</div>
                        <div id="previewGender"></div>
                        <div id="previewAddress">New York, NY</div>
                        <div id="previewLinkedIn">linkedin.com/in/johndoe</div>
                    </div>

                    <div class="section">
                        <div class="section-title">PROFESSIONAL SUMMARY</div>
                        <div id="previewSummary">Experienced software developer with 5+ years...</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">EDUCATION</div>
                        <div id="previewEducation"></div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">EXPERIENCE</div>
                        <div id="previewExperience">Software Engineer at Tech Corp (2020-Present): Developed web applications using React and Node.js...</div>
                    </div>

                    <div class="section">
                        <div class="section-title">PROJECTS</div>
                        <div id="previewProjects"></div>
                    </div>

                    <div class="section">
                        <div class="section-title">CERTIFICATIONS</div>
                        <div id="previewCertifications">AWS Certified Developer, Google Cloud Professional...</div>
                    </div>
                    
                    <div class="section">
                        <div class="section-title">SKILLS</div>
                        <div id="previewSkills">JavaScript, React, Node.js, Python, SQL</div>
                    </div>

                    <div class="section">
                        <div class="section-title">LANGUAGES</div>
                        <div id="previewLanguages">English (Native), Spanish (Intermediate)</div>
                    </div>
                `;
                
                resumePreview.innerHTML = defaultHTML;
                updatePreviewElements();
            }
            
            // Update preview elements after structure change
            function updatePreviewElements() {
                // Reassign preview elements after structure change
                previewElements.name = document.getElementById('previewName');
                previewElements.email = document.getElementById('previewEmail');
                previewElements.phone = document.getElementById('previewPhone');
                previewElements.gender = document.getElementById('previewGender');
                previewElements.address = document.getElementById('previewAddress');
                previewElements.linkedin = document.getElementById('previewLinkedIn');
                previewElements.summary = document.getElementById('previewSummary');
                previewElements.education = document.getElementById('previewEducation');
                previewElements.experience = document.getElementById('previewExperience');
                previewElements.projects = document.getElementById('previewProjects');
                previewElements.certifications = document.getElementById('previewCertifications');
                previewElements.skills = document.getElementById('previewSkills');
                previewElements.languages = document.getElementById('previewLanguages');
                
                // Update with current values
                Object.keys(inputElements).forEach(key => {
                    const previewKey = key === 'fullName' ? 'name' : key;
                    if (previewElements[previewKey]) {
                        previewElements[previewKey].textContent = inputElements[key].value || getDefaultValue(previewKey);
                    }
                });
                
                updateEducationPreview();
                updateProjectsPreview();
            }
            
            // Add education entry
            addEducationBtn.addEventListener('click', function() {
                const educationEntry = document.createElement('div');
                educationEntry.className = 'education-entry';
                educationEntry.innerHTML = `
                    <div class="education-header">
                        <div>
                            <select class="education-level">
                                <option value="">Select Degree Level</option>
                                <option value="High School">High School</option>
                                <option value="Associate">Associate</option>
                                <option value="Bachelor's">Bachelor's</option>
                                <option value="Master's">Master's</option>
                                <option value="Doctorate">Doctorate</option>
                            </select>
                        </div>
                        <div>
                            <input type="text" class="education-year" placeholder="Passout Year">
                        </div>
                    </div>
                    <input type="text" class="education-degree" placeholder="Degree Name (e.g., B.Tech in Computer Science)">
                    <input type="text" class="education-college" placeholder="College/University Name">
                    <input type="text" class="education-grade" placeholder="Percentage/CGPA (e.g., 85% or 8.5/10)">
                    <button class="remove-btn"><i class="fas fa-trash"></i> Remove</button>
                `;
                
                educationContainer.appendChild(educationEntry);
                
                // Add event listener to remove button
                educationEntry.querySelector('.remove-btn').addEventListener('click', function() {
                    educationEntry.remove();
                });
            });
            
            // Add project entry
            addProjectBtn.addEventListener('click', function() {
                const projectEntry = document.createElement('div');
                projectEntry.className = 'project-entry';
                projectEntry.innerHTML = `
                    <div class="project-header">
                        <input type="text" class="project-name" placeholder="Project Name">
                        <input type="text" class="project-date" placeholder="Project Duration">
                    </div>
                    <input type="text" class="project-tech" placeholder="Technologies Used">
                    <textarea class="project-description" placeholder="Project Description"></textarea>
                    <button class="remove-btn"><i class="fas fa-trash"></i> Remove</button>
                `;
                
                projectsContainer.appendChild(projectEntry);
                
                // Add event listener to remove button
                projectEntry.querySelector('.remove-btn').addEventListener('click', function() {
                    projectEntry.remove();
                });
            });
            
            // Real-time preview updates
            Object.keys(inputElements).forEach(key => {
                inputElements[key].addEventListener('input', function() {
                    const previewKey = key === 'fullName' ? 'name' : key;
                    if (previewElements[previewKey]) {
                        previewElements[previewKey].textContent = this.value || getDefaultValue(previewKey);
                    }
                    
                    // Validate on input
                    validateField(key);
                });
            });
            
            // Field validation on blur
            Object.keys(inputElements).forEach(key => {
                if (key === 'fullName' || key === 'email') {
                    inputElements[key].addEventListener('blur', function() {
                        validateField(key);
                    });
                }
            });
            
            // Validate a specific field
            function validateField(fieldName) {
                const value = inputElements[fieldName].value.trim();
                let isValid = true;
                let errorMessage = '';
                
                switch(fieldName) {
                    case 'fullName':
                        isValid = value.length >= 2;
                        errorMessage = 'Please enter your full name (at least 2 characters)';
                        break;
                    case 'email':
                        isValid = isValidEmail(value) || value === '';
                        errorMessage = 'Please enter a valid email address';
                        break;
                }
                
                // Show/hide error message
                const errorElement = errorElements[fieldName + 'Error'];
                if (errorElement) {
                    errorElement.style.display = isValid ? 'none' : 'block';
                    inputElements[fieldName].style.borderColor = isValid ? '#ddd' : '#e74c3c';
                }
                
                return isValid;
            }
            
            // Email validation
            function isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }
            
            // Validate entire form
            function validateForm() {
                const errors = [];
                
                if (!validateField('fullName')) errors.push('Full name is required');
                if (!validateField('email')) errors.push('Valid email is required');
                
                return errors;
            }
            
            // Get default value for preview
            function getDefaultValue(field) {
                const defaults = {
                    name: 'John Doe',
                    email: 'john.doe@example.com',
                    phone: '+1 (555) 123-4567',
                    gender: '',
                    address: 'New York, NY',
                    linkedin: 'linkedin.com/in/johndoe',
                    summary: 'Experienced professional with a strong background...',
                    education: 'No education information provided',
                    experience: 'Software Engineer at Tech Corp (2020-Present): Developed web applications using React and Node.js...',
                    projects: 'No project information provided',
                    certifications: 'AWS Certified Developer, Google Cloud Professional...',
                    skills: 'JavaScript, React, Node.js, Python, SQL',
                    languages: 'English (Native), Spanish (Intermediate)'
                };
                
                return defaults[field] || 'Information not provided';
            }
            
            // Show error notification
            function showError(message) {
                errorText.textContent = message;
                errorNotification.style.display = 'block';
                successMessage.style.display = 'none';
                aiSuggestions.style.display = 'none';
                atsSection.style.display = 'none';
                
                // Scroll to error
                errorNotification.scrollIntoView({ behavior: 'smooth' });
            }
            
            // Hide all notifications
            function hideNotifications() {
                successMessage.style.display = 'none';
                errorNotification.style.display = 'none';
                aiSuggestions.style.display = 'none';
                atsSection.style.display = 'none';
            }
            
            // Generate resume
            generateBtn.addEventListener('click', function() {
                // Validate form
                const errors = validateForm();
                if (errors.length > 0) {
                    showError(errors[0]);
                    return;
                }
                
                // Hide notifications
                hideNotifications();
                
                // Show loading
                loading.style.display = 'block';
                generateBtn.disabled = true;
                
                // Simulate AI processing (in a real app, this would call your backend)
                setTimeout(() => {
                    // Update preview with user data
                    Object.keys(inputElements).forEach(key => {
                        const previewKey = key === 'fullName' ? 'name' : key;
                        if (previewElements[previewKey]) {
                            previewElements[previewKey].textContent = inputElements[key].value || getDefaultValue(previewKey);
                        }
                    });
                    
                    // Update education section
                    updateEducationPreview();
                    
                    // Update projects section
                    updateProjectsPreview();
                    
                    // Apply selected template
                    resumePreview.className = 'resume-preview ' + selectedTemplate;
                    
                    // Enable download and AI enhance buttons
                    downloadBtn.disabled = false;
                    aiEnhanceBtn.disabled = false;
                    checkAtsBtn.disabled = false;
                    isResumeGenerated = true;
                    
                    // Hide loading, show success
                    loading.style.display = 'none';
                    successMessage.style.display = 'block';
                    generateBtn.disabled = false;
                    
                    // Scroll to preview section
                    document.querySelector('.preview-section').scrollIntoView({ 
                        behavior: 'smooth' 
                    });
                }, 1500);
            });
            
            // Update education preview
            function updateEducationPreview() {
                const educationEntries = document.querySelectorAll('.education-entry');
                let educationHTML = '';
                
                if (educationEntries.length === 0) {
                    educationHTML = '<p>No education information provided</p>';
                } else {
                    educationEntries.forEach(entry => {
                        const level = entry.querySelector('.education-level').value;
                        const year = entry.querySelector('.education-year').value;
                        const degree = entry.querySelector('.education-degree').value;
                        const college = entry.querySelector('.education-college').value;
                        const grade = entry.querySelector('.education-grade').value;
                        
                        if (degree || college) {
                            if (selectedTemplate === 'template-4' || selectedTemplate === 'template-5') {
                                educationHTML += `
                                    <div class="education-entry">
                                        <div class="education-header">
                                            <div class="education-degree">${level ? level + ' in ' : ''}${degree || 'Degree'}</div>
                                            <div class="education-date">${year || 'Year'}</div>
                                        </div>
                                        <div class="education-college">${college || 'College/University'}</div>
                                        <div class="education-grade">${grade || 'Grade'}</div>
                                    </div>
                                `;
                            } else {
                                educationHTML += `
                                    <div class="education-entry">
                                        <div class="education-header">
                                            <div class="education-degree">${level ? level + ' in ' : ''}${degree || 'Degree'}</div>
                                            <div class="education-date">${year || 'Year'}</div>
                                        </div>
                                        <div class="education-college">${college || 'College/University'}</div>
                                        <div class="education-grade">${grade || 'Grade'}</div>
                                    </div>
                                `;
                            }
                        }
                    });
                    
                    if (!educationHTML) {
                        educationHTML = '<p>No education information provided</p>';
                    }
                }
                
                if (previewElements.education) {
                    previewElements.education.innerHTML = educationHTML;
                }
            }
            
            // Update projects preview
            function updateProjectsPreview() {
                const projectEntries = document.querySelectorAll('.project-entry');
                let projectsHTML = '';
                
                if (projectEntries.length === 0) {
                    projectsHTML = '<p>No project information provided</p>';
                } else {
                    projectEntries.forEach(entry => {
                        const name = entry.querySelector('.project-name').value;
                        const date = entry.querySelector('.project-date').value;
                        const tech = entry.querySelector('.project-tech').value;
                        const description = entry.querySelector('.project-description').value;
                        
                        if (name || description) {
                            if (selectedTemplate === 'template-4' || selectedTemplate === 'template-5') {
                                projectsHTML += `
                                    <div class="project-entry">
                                        <div class="project-header">
                                            <div class="project-name">${name || 'Project Name'}</div>
                                            <div class="project-date">${date || 'Duration'}</div>
                                        </div>
                                        <div class="project-tech">${tech || 'Technologies used'}</div>
                                        <div class="project-description">${description || 'Project description'}</div>
                                    </div>
                                `;
                            } else {
                                projectsHTML += `
                                    <div class="project-entry">
                                        <div class="project-header">
                                            <div class="project-name">${name || 'Project Name'}</div>
                                            <div class="project-date">${date || 'Duration'}</div>
                                        </div>
                                        <div class="project-tech">${tech || 'Technologies used'}</div>
                                        <div class="project-description">${description || 'Project description'}</div>
                                    </div>
                                `;
                            }
                        }
                    });
                    
                    if (!projectsHTML) {
                        projectsHTML = '<p>No project information provided</p>';
                    }
                }
                
                if (previewElements.projects) {
                    previewElements.projects.innerHTML = projectsHTML;
                }
            }
            
            // AI Enhance functionality
            aiEnhanceBtn.addEventListener('click', function() {
                if (!isResumeGenerated) {
                    showError('Please generate a resume first before using AI enhancement.');
                    return;
                }
                
                // Show loading
                loading.style.display = 'block';
                aiEnhanceBtn.disabled = true;
                hideNotifications();
                
                // Simulate AI enhancement (in a real app, this would call DeepSeek API)
                setTimeout(() => {
                    // Generate AI suggestions
                    const suggestions = [
                        "Consider adding quantifiable achievements to your experience section (e.g., 'Increased performance by 30%')",
                        "Add more specific technical skills relevant to your target industry",
                        "Include keywords from job descriptions you're targeting for better ATS compatibility",
                        "Consider adding a projects section to showcase your work",
                        "Use action verbs like 'developed', 'managed', 'implemented' to start bullet points"
                    ];
                    
                    // Display suggestions
                    suggestionsList.innerHTML = '';
                    suggestions.forEach(suggestion => {
                        const suggestionItem = document.createElement('div');
                        suggestionItem.className = 'suggestion-item';
                        suggestionItem.textContent = suggestion;
                        suggestionsList.appendChild(suggestionItem);
                    });
                    
                    // Hide loading, show suggestions
                    loading.style.display = 'none';
                    aiSuggestions.style.display = 'block';
                    aiEnhanceBtn.disabled = false;
                    
                    // Scroll to suggestions
                    aiSuggestions.scrollIntoView({ behavior: 'smooth' });
                }, 2000);
            });
            
            // ATS Check Functionality
            checkAtsBtn.addEventListener('click', function() {
                if (!isResumeGenerated) {
                    showError('Please generate a resume first before checking ATS score.');
                    return;
                }
                
                // Show loading
                loading.style.display = 'block';
                checkAtsBtn.disabled = true;
                hideNotifications();
                
                // Simulate ATS analysis (in a real app, this would call an API)
                setTimeout(() => {
                    // Analyze resume content
                    const atsScore = calculateAtsScore();
                    
                    // Display ATS score
                    displayAtsScore(atsScore);
                    
                    // Hide loading, show ATS section
                    loading.style.display = 'none';
                    atsSection.style.display = 'block';
                    checkAtsBtn.disabled = false;
                    
                    // Scroll to ATS section
                    atsSection.scrollIntoView({ behavior: 'smooth' });
                }, 1500);
            });
            
            // Calculate ATS Score
            function calculateAtsScore() {
                let score = 0;
                const maxScore = 100;
                
                // Get resume content
                const resumeContent = getResumeContent();
                
                // Check 1: Contact Information (10 points)
                if (resumeContent.name && resumeContent.email && resumeContent.phone) {
                    score += 10;
                } else if (resumeContent.name && resumeContent.email) {
                    score += 7;
                } else if (resumeContent.name) {
                    score += 5;
                }
                
                // Check 2: Professional Summary (10 points)
                if (resumeContent.summary && resumeContent.summary.length > 50) {
                    score += 10;
                } else if (resumeContent.summary && resumeContent.summary.length > 20) {
                    score += 5;
                }
                
                // Check 3: Education Section (15 points)
                if (resumeContent.education && resumeContent.education.length > 0) {
                    score += 15;
                } else if (resumeContent.education) {
                    score += 5;
                }
                
                // Check 4: Experience Section (20 points)
                if (resumeContent.experience && resumeContent.experience.length > 50) {
                    score += 20;
                } else if (resumeContent.experience && resumeContent.experience.length > 20) {
                    score += 10;
                }
                
                // Check 5: Skills Section (15 points)
                if (resumeContent.skills && resumeContent.skills.length > 10) {
                    score += 15;
                } else if (resumeContent.skills && resumeContent.skills.length > 5) {
                    score += 8;
                }
                
                // Check 6: Keywords and Action Verbs (15 points)
                const keywords = ['managed', 'developed', 'implemented', 'achieved', 'improved', 'led', 'created'];
                let keywordCount = 0;
                
                if (resumeContent.experience) {
                    keywords.forEach(keyword => {
                        if (resumeContent.experience.toLowerCase().includes(keyword)) {
                            keywordCount++;
                        }
                    });
                }
                
                if (resumeContent.summary) {
                    keywords.forEach(keyword => {
                        if (resumeContent.summary.toLowerCase().includes(keyword)) {
                            keywordCount++;
                        }
                    });
                }
                
                score += Math.min(keywordCount * 2, 15);
                
                // Check 7: Formatting and Structure (15 points)
                // Basic check for structure completeness
                const sections = ['summary', 'education', 'experience', 'skills'];
                let sectionCount = 0;
                
                sections.forEach(section => {
                    if (resumeContent[section] && resumeContent[section].length > 10) {
                        sectionCount++;
                    }
                });
                
                score += (sectionCount / sections.length) * 15;
                
                return Math.min(score, maxScore);
            }
            
            // Get resume content for analysis
            function getResumeContent() {
                return {
                    name: inputElements.fullName.value,
                    email: inputElements.email.value,
                    phone: inputElements.phone.value,
                    summary: inputElements.summary.value,
                    education: previewElements.education.textContent,
                    experience: inputElements.experience.value,
                    skills: inputElements.skills.value,
                    projects: previewElements.projects.textContent,
                    certifications: inputElements.certifications.value
                };
            }
            
            // Display ATS Score and Analysis
            function displayAtsScore(score) {
                // Update score display
                scoreValue.textContent = `${score}%`;
                
                // Update score circle gradient
                const percentage = score;
                const passColor = '#27ae60';
                const warningColor = '#f39c12';
                const failColor = '#e74c3c';
                
                let color;
                if (score >= 80) color = passColor;
                else if (score >= 60) color = warningColor;
                else color = failColor;
                
                scoreCircle.style.background = `conic-gradient(${color} 0% ${percentage}%, #ecf0f1 ${percentage}% 100%)`;
                
                // Update score text and description
                if (score >= 80) {
                    scoreText.textContent = 'Excellent ATS Compatibility';
                    scoreDescription.textContent = 'Your resume is well-optimized for Applicant Tracking Systems.';
                } else if (score >= 60) {
                    scoreText.textContent = 'Good ATS Compatibility';
                    scoreDescription.textContent = 'Your resume has good ATS compatibility but could be improved further.';
                } else if (score >= 40) {
                    scoreText.textContent = 'Fair ATS Compatibility';
                    scoreDescription.textContent = 'Your resume may have issues with some Applicant Tracking Systems.';
                } else {
                    scoreText.textContent = 'Poor ATS Compatibility';
                    scoreDescription.textContent = 'Your resume needs significant improvements to pass through most Applicant Tracking Systems.';
                }
                
                // Generate ATS breakdown
                generateAtsBreakdown(score);
                
                // Generate improvement suggestions
                generateImprovementSuggestions(score);
            }
            
            // Generate ATS Breakdown
            function generateAtsBreakdown(score) {
                const resumeContent = getResumeContent();
                atsBreakdown.innerHTML = '';
                
                // Contact Information Check
                const contactScore = calculateContactScore(resumeContent);
                atsBreakdown.appendChild(createCategoryCard(
                    'Contact Information',
                    contactScore,
                    [
                        { text: 'Full name provided', pass: !!resumeContent.name },
                        { text: 'Email address provided', pass: !!resumeContent.email },
                        { text: 'Phone number provided', pass: !!resumeContent.phone }
                    ]
                ));
                
                // Content Quality Check
                const contentScore = calculateContentScore(resumeContent);
                atsBreakdown.appendChild(createCategoryCard(
                    'Content Quality',
                    contentScore,
                    [
                        { text: 'Professional summary present', pass: !!resumeContent.summary && resumeContent.summary.length > 20 },
                        { text: 'Sufficient experience details', pass: !!resumeContent.experience && resumeContent.experience.length > 50 },
                        { text: 'Skills section populated', pass: !!resumeContent.skills && resumeContent.skills.length > 10 }
                    ]
                ));
                
                // Keyword Optimization Check
                const keywordScore = calculateKeywordScore(resumeContent);
                atsBreakdown.appendChild(createCategoryCard(
                    'Keyword Optimization',
                    keywordScore,
                    [
                        { text: 'Action verbs used', pass: keywordScore > 5 },
                        { text: 'Industry-specific terms', pass: keywordScore > 8 },
                        { text: 'Quantifiable achievements', pass: resumeContent.experience && /[0-9]/.test(resumeContent.experience) }
                    ]
                ));
                
                // Structure Check
                const structureScore = calculateStructureScore(resumeContent);
                atsBreakdown.appendChild(createCategoryCard(
                    'Structure & Formatting',
                    structureScore,
                    [
                        { text: 'Clear section headings', pass: structureScore > 8 },
                        { text: 'Appropriate length', pass: getResumeLength(resumeContent) > 200 && getResumeLength(resumeContent) < 1000 },
                        { text: 'Logical flow', pass: structureScore > 5 }
                    ]
                ));
            }
            
            // Helper functions for ATS scoring
            function calculateContactScore(content) {
                let score = 0;
                if (content.name) score += 30;
                if (content.email) score += 30;
                if (content.phone) score += 40;
                return score;
            }
            
            function calculateContentScore(content) {
                let score = 0;
                if (content.summary && content.summary.length > 20) score += 30;
                if (content.experience && content.experience.length > 50) score += 40;
                if (content.skills && content.skills.length > 10) score += 30;
                return score;
            }
            
            function calculateKeywordScore(content) {
                const keywords = ['managed', 'developed', 'implemented', 'achieved', 'improved', 'led', 'created'];
                let keywordCount = 0;
                
                if (content.experience) {
                    keywords.forEach(keyword => {
                        if (content.experience.toLowerCase().includes(keyword)) {
                            keywordCount++;
                        }
                    });
                }
                
                if (content.summary) {
                    keywords.forEach(keyword => {
                        if (content.summary.toLowerCase().includes(keyword)) {
                            keywordCount++;
                        }
                    });
                }
                
                return Math.min(keywordCount * 10, 100);
            }
            
            function calculateStructureScore(content) {
                const sections = ['summary', 'education', 'experience', 'skills'];
                let sectionCount = 0;
                
                sections.forEach(section => {
                    if (content[section] && content[section].length > 10) {
                        sectionCount++;
                    }
                });
                
                return (sectionCount / sections.length) * 100;
            }
            
            function getResumeLength(content) {
                let length = 0;
                Object.values(content).forEach(value => {
                    if (value) length += value.length;
                });
                return length;
            }
            
            // Create ATS category card
            function createCategoryCard(title, score, checks) {
                const card = document.createElement('div');
                card.className = 'ats-category';
                
                const header = document.createElement('h3');
                header.innerHTML = `${title} <span class="category-score">${score}%</span>`;
                
                const list = document.createElement('ul');
                
                checks.forEach(check => {
                    const item = document.createElement('li');
                    item.textContent = check.text;
                    item.className = check.pass ? 'pass' : 'fail';
                    list.appendChild(item);
                });
                
                card.appendChild(header);
                card.appendChild(list);
                
                return card;
            }
            
            // Generate improvement suggestions
            function generateImprovementSuggestions(score) {
                const resumeContent = getResumeContent();
                improvementsList.innerHTML = '';
                
                const suggestions = [];
                
                // Contact information suggestions
                if (!resumeContent.name) {
                    suggestions.push('Add your full name to the resume');
                }
                
                if (!resumeContent.email) {
                    suggestions.push('Include a professional email address');
                }
                
                if (!resumeContent.phone) {
                    suggestions.push('Add a contact phone number');
                }
                
                // Content suggestions
                if (!resumeContent.summary || resumeContent.summary.length < 20) {
                    suggestions.push('Write a more detailed professional summary (at least 2-3 sentences)');
                }
                
                if (!resumeContent.experience || resumeContent.experience.length < 50) {
                    suggestions.push('Expand your experience section with more details about your roles and responsibilities');
                }
                
                if (!resumeContent.skills || resumeContent.skills.length < 10) {
                    suggestions.push('List more specific skills relevant to your target position');
                }
                
                // Keyword suggestions
                const actionVerbs = ['managed', 'developed', 'implemented', 'achieved', 'improved'];
                let hasActionVerbs = false;
                
                if (resumeContent.experience) {
                    actionVerbs.forEach(verb => {
                        if (resumeContent.experience.toLowerCase().includes(verb)) {
                            hasActionVerbs = true;
                        }
                    });
                }
                
                if (!hasActionVerbs) {
                    suggestions.push('Use more action verbs like "managed", "developed", or "implemented" to start bullet points');
                }
                
                if (!resumeContent.experience || !/[0-9]/.test(resumeContent.experience)) {
                    suggestions.push('Include quantifiable achievements (e.g., "increased sales by 15%")');
                }
                
                // Structure suggestions
                if (getResumeLength(resumeContent) < 200) {
                    suggestions.push('Add more content to your resume - aim for at least 200-300 words');
                }
                
                if (getResumeLength(resumeContent) > 1000) {
                    suggestions.push('Consider shortening your resume - aim for 1-2 pages maximum');
                }
                
                // Display suggestions
                if (suggestions.length === 0) {
                    const item = document.createElement('div');
                    item.className = 'improvement-item';
                    item.textContent = 'Your resume is well-optimized for ATS. No major improvements needed.';
                    improvementsList.appendChild(item);
                } else {
                    suggestions.forEach(suggestion => {
                        const item = document.createElement('div');
                        item.className = 'improvement-item';
                        item.textContent = suggestion;
                        improvementsList.appendChild(item);
                    });
                }
            }
            
            // Download as PDF
            downloadBtn.addEventListener('click', function() {
                if (!isResumeGenerated) {
                    showError('Please generate a resume first before downloading.');
                    return;
                }
                
                // Show loading during PDF generation
                loading.style.display = 'block';
                downloadBtn.disabled = true;
                
                // Create a clone of the resume preview
                const element = document.getElementById('resumePreview');
                const resumeClone = element.cloneNode(true);
                
                // Remove interactive elements
                const buttons = resumeClone.querySelectorAll('button');
                buttons.forEach(btn => btn.remove());
                
                // Apply PDF-optimized styles
                resumeClone.classList.add('pdf-optimized');
                resumeClone.style.width = '210mm';
                resumeClone.style.minHeight = '297mm';
                resumeClone.style.padding = '25mm';
                resumeClone.style.margin = '0';
                resumeClone.style.boxSizing = 'border-box';
                resumeClone.style.fontSize = '12px';
                resumeClone.style.lineHeight = '1.4';
                
                // Fix template-specific issues
                if (resumeClone.classList.contains('template-3') || resumeClone.classList.contains('template-4')) {
                    const header = resumeClone.querySelector('.resume-header');
                    if (header) {
                        header.style.margin = '0';
                        header.style.borderRadius = '0';
                    }
                }
                
                // Create a container for PDF generation
                const container = document.createElement('div');
                container.style.padding = '0';
                container.style.margin = '0';
                container.style.backgroundColor = '#ffffff';
                container.appendChild(resumeClone);
                
                // PDF options with proper scaling
                const options = {
                    margin: [10, 10, 10, 10],
                    filename: `${inputElements.fullName.value.trim() || 'resume'}.pdf`,
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { 
                        scale: 2,
                        width: 800,
                        useCORS: true,
                        logging: false,
                        backgroundColor: '#ffffff',
                        scrollX: 0,
                        scrollY: 0,
                        windowWidth: 1530
                    },
                    jsPDF: { 
                        unit: 'mm', 
                        format: 'a4', 
                        orientation: 'portrait',
                        compress: true,
                        hotfixes: ['px_scaling']
                    }
                };
                
                // Generate PDF
                setTimeout(() => {
                    html2pdf().set(options).from(container).save().then(() => {
                        console.log('PDF generated successfully');
                        loading.style.display = 'none';
                        downloadBtn.disabled = false;
                    }).catch((error) => {
                        console.error('PDF generation error:', error);
                        showError('There was an error generating the PDF. Please try again.');
                        loading.style.display = 'none';
                        downloadBtn.disabled = false;
                    });
                }, 500);
            });
        });
    </script>
</body>
</html>